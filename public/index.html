<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <title>Classic Dreamspread | Premium Home D√©cor in Ghana</title>
    <meta name="description" content="Premium bedspreads and curtains in Ghana. Elegant designs, affordable pricing, and fast WhatsApp ordering. Quality materials, stylish designs, and reliable delivery across Ghana.">
    <meta name="keywords" content="bedspreads, curtains, home d√©cor, Ghana, bedding, window treatments, Classic Dreamspread, premium quality">
    <meta name="author" content="Classic Dreamspread">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Classic Dreamspread | Premium Home D√©cor in Ghana">
    <meta property="og:description" content="Premium bedspreads and curtains in Ghana. Elegant designs, affordable pricing, and fast WhatsApp ordering.">
    <meta property="og:url" content="https://att-home-decor.com">
    <meta property="og:image" content="https://att-home-decor.com/assets/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Classic Dreamspread - Premium Bedspreads and Curtains">
    <meta property="og:site_name" content="Classic Dreamspread">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Classic Dreamspread | Premium Home D√©cor in Ghana">
    <meta name="twitter:description" content="Premium bedspreads and curtains in Ghana. Elegant designs, affordable pricing, and fast WhatsApp ordering.">
    <meta name="twitter:image" content="https://att-home-decor.com/assets/images/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon/favicon.svg">
    <link rel="apple-touch-icon" href="assets/favicon/favicon.svg">
    
    <!-- Fonts - Optimized loading with font-display: swap -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Supabase Client -->
    <script src="/assets/js/supabase.js" defer></script>

  </head>
<body>

<a href="#main-content" class="skip-link">Skip to content</a>

<header class="header">
    <h1 class="logo">Classic <span>Dreamspread</span></h1>

    <nav class="nav" role="navigation" aria-label="Primary Navigation">
        <div class="nav-links" id="navLinks">
            <a href="index.html" class="active" aria-current="page">Home</a>
            <a href="products.html">Products</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
        </div>
        <button class="hamburger" id="hamburger" aria-label="Toggle Navigation Menu" aria-expanded="false" aria-controls="navLinks">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>
</header>

<main id="main-content">

    <!-- HERO SECTION -->
    <section class="hero">
        <h2>Make Your Home Cozy & Elegant</h2>
        <p>
            Premium curtains and bedspreads crafted to enhance your bedroom and living space.
            Stylish designs, fair pricing, and reliable delivery across Ghana.
        </p>

        <div class="hero-actions">
            <a href="products.html?filter=all" class="btn hero-btn" role="button">View All Products</a>
            <a href="products.html?filter=bedspread" class="btn hero-btn" role="button">Shop Bedspreads</a>
            <a href="products.html?filter=curtain" class="btn hero-btn" role="button">Shop Curtains</a>
            <a href="https://wa.me/233540460532" class="btn hero-btn" target="_blank" rel="noopener noreferrer" style="background: linear-gradient(135deg, #25D366, #128C7E);">Order on WhatsApp</a>
        </div>
    </section>

    <!-- DELIVERY COVERAGE NOTICE -->
    <section class="notice-banner" aria-label="Delivery coverage notice">
        <p>üöö <strong>We deliver nationwide across Ghana</strong> &mdash; doorstep delivery available in all major cities and towns.</p>
    </section>

    <!-- FEATURED PRODUCTS -->
    <section class="section" aria-labelledby="featured-heading">
        <h2 id="featured-heading" class="section-title">Featured Products</h2>
        <div class="products" id="featured-products" role="list" aria-label="Featured products list">
            <!-- Featured Bedspread -->
            <article class="product-card" data-category="bedspread" role="listitem" aria-label="Product: Luxury Bedspread">
                <a href="products.html?filter=bedspread" style="text-decoration: none; color: inherit; display: block;">
                    <span class="badge badge-best">Best</span>
                    <span class="price-badge">GHS 350</span>
                    <picture>
                        <img src="data:image/svg+xml;utf8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27400%27 height=%27300%27%3E%3Crect width=%27100%25%27 height=%27100%25%27 fill=%27%23f8f9fa%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27 fill=%27%236c757d%27 font-family=%27Arial%27 font-size=%2718%27%3ELuxury Bedspread%3C/text%3E%3C/svg%3E" 
                             alt="Luxury Bedspread" 
                             loading="eager" 
                             decoding="async" 
                             width="400" 
                             height="300" 
                             fetchpriority="high">
                    </picture>
                    <div class="product-card-content">
                        <h3>Luxury Bedspread</h3>
                        <a href="products.html?filter=bedspread" 
                           class="btn" 
                           aria-label="View Luxury Bedspread"
                           style="background: linear-gradient(135deg, #25D366, #128C7E);">
                            View Details
                        </a>
                    </div>
                </a>
            </article>

            <!-- Featured Curtain -->
            <article class="product-card" data-category="curtain" role="listitem" aria-label="Product: Modern Curtain Set">
                <a href="products.html?filter=curtain" style="text-decoration: none; color: inherit; display: block;">
                    <span class="badge badge-new">New</span>
                    <span class="price-badge">GHS 200</span>
                    <picture>
                        <img src="https://upmhieojblkvtgkxtocn.supabase.co/storage/v1/object/public/product-images/curt1.webp" 
                             alt="Modern Curtain Set" 
                             loading="eager" 
                             decoding="async" 
                             width="400" 
                             height="300" 
                             fetchpriority="high">
                    </picture>
                    <div class="product-card-content">
                        <h3>Modern Curtain Set</h3>
                        <a href="products.html?filter=curtain" 
                           class="btn" 
                           aria-label="View Modern Curtain Set"
                           style="background: linear-gradient(135deg, #25D366, #128C7E);">
                            View Details
                        </a>
                    </div>
                </a>
            </article>

            <!-- Additional products will be loaded dynamically here -->
            <div class="products-loading" aria-live="polite" aria-busy="true" style="text-align: center; padding: 2rem; color: var(--muted);">
                Loading more products...
            </div>
        </div>
    </section>

    <!-- NEW ARRIVALS -->
    <section class="section" aria-labelledby="new-arrivals-heading">
        <h2 id="new-arrivals-heading" class="section-title">New Arrivals</h2>
        <div class="products" role="list" aria-label="New arrivals list">
            <article class="product-card" role="listitem" aria-label="Product: Modern Pattern Bedspread">
                <a href="products.html?filter=bedspread" style="text-decoration: none; color: inherit; display: block;">
                    <span class="badge badge-new">New</span>
                    <span class="price-badge">GHS 300</span>
                    <picture>
                        <img src="https://upmhieojblkvtgkxtocn.supabase.co/storage/v1/object/public/product-images/bedspread-modern.webp"
                             alt="Modern Pattern Bedspread on a neatly arranged bed"
                             loading="lazy"
                             decoding="async"
                             width="100"
                             height="100"
                             fetchpriority="low">
                    </picture>
                    <div class="product-card-content">
                        <h3>Modern Pattern Bedspread</h3>
                        <p class="product-card-text">Fresh modern design that instantly upgrades your bedroom look.</p>
                        <a href="products.html?filter=bedspread"
                           class="btn"
                           aria-label="View Modern Pattern Bedspread"
                           style="background: linear-gradient(135deg, #25D366, #128C7E);">
                            View Details
                        </a>
                    </div>
                </a>
            </article>

            <article class="product-card" role="listitem" aria-label="Product: Velvet Curtain Set">
                <a href="products.html?filter=curtain" style="text-decoration: none; color: inherit; display: block;">
                    <span class="badge badge-new">New</span>
                    <span class="price-badge">GHS 320</span>
                    <picture>
                        <img src="https://upmhieojblkvtgkxtocn.supabase.co/storage/v1/object/public/product-images/curt6.jpg"
                             alt="Luxurious velvet curtain set in a bright living room"
                             loading="lazy"
                             decoding="async"
                             width="100"
                             height="100"
                             fetchpriority="low">
                    </picture>
                    <div class="product-card-content">
                        <h3>Velvet Curtain Set</h3>
                        <p class="product-card-text">Rich velvet curtains for a premium, hotel-style finish.</p>
                        <a href="products.html?filter=curtain"
                           class="btn"
                           aria-label="View Velvet Curtain Set"
                           style="background: linear-gradient(135deg, #25D366, #128C7E);">
                            View Details
                        </a>
                    </div>
                </a>
            </article>
        </div>
    </section>



    <!-- WHY CHOOSE US -->
    <section class="section section-light" aria-labelledby="why-choose-heading">
        <h2 id="why-choose-heading" class="section-title">Why Choose Classic Dreamspread</h2>
        <div class="products" role="list" aria-label="Benefits list">
            <article class="info-card" role="listitem">
                <h3>Quality Materials</h3>
                <p>Durable fabrics with premium finishing for long-lasting comfort and style.</p>
            </article>
            <article class="info-card" role="listitem">
                <h3>Affordable Pricing</h3>
                <p>Direct pricing with no unnecessary markups. Fair value for premium quality.</p>
            </article>
            <article class="info-card" role="listitem">
                <h3>Fast WhatsApp Response</h3>
                <p>Quick replies and smooth ordering via WhatsApp. We're here when you need us.</p>
            </article>
        </div>
    </section>

    <!-- CUSTOMER REVIEWS -->
    <section class="section section-light" aria-labelledby="reviews-heading">
        <h2 id="reviews-heading" class="section-title">What Our Customers Say</h2>
        <div class="products" role="list" aria-label="Customer reviews">
            <article class="info-card" role="listitem">
                <p>‚ÄúThe bedspread quality is amazing and feels very premium. Delivery to Kumasi was fast and smooth.‚Äù</p>
                <p><strong>&mdash; Ama, Kumasi</strong></p>
            </article>
            <article class="info-card" role="listitem">
                <p>‚ÄúI ordered curtains for my living room and bedroom. The colors are exactly as shown, and the finishing is neat.‚Äù</p>
                <p><strong>&mdash; Kofi, Accra</strong></p>
            </article>
            <article class="info-card" role="listitem">
                <p>‚ÄúGreat customer service on WhatsApp. They helped me choose the right size and style for my space.‚Äù</p>
                <p><strong>&mdash; Akosua, Cape Coast</strong></p>
            </article>
        </div>
    </section>

</main>

<footer class="footer">
    <p>&copy; <time datetime="2025">2025</time> Classic Dreamspread. All Rights Reserved.</p>
</footer>

<!-- WHATSAPP FLOATING CTA -->
<a href="https://wa.me/233540460532"
   class="whatsapp-float"
   aria-label="Chat with us on WhatsApp"
   target="_blank"
   rel="noopener noreferrer">
   WhatsApp
</a>

<!-- SUPABASE & DYNAMIC PRODUCTS SCRIPT -->
<script>
    (function() {
    'use strict';

    let supabaseClient;

    async function initSupabaseClientFromServerConfig() {
      try {
        const res = await fetch('/config', { cache: 'no-store' });
        if (!res.ok) {
          console.warn('Config endpoint not available', res.status);
          showError('Unable to load products. Please refresh the page.');
          return false;
        }
        const cfg = await res.json();
        const SUPABASE_URL = cfg.supabaseUrl || 'https://upmhieojblkvtgkxtocn.supabase.co';
        const SUPABASE_ANON_KEY = cfg.supabaseAnonKey || '';

        if (!SUPABASE_ANON_KEY) {
          console.error('Missing SUPABASE_ANON_KEY in server config');
          showError('Configuration missing. Please contact the site administrator.');
          return false;
        }

        if (typeof window.supabase !== 'undefined' && typeof window.supabase.createClient === 'function') {
          supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
          return true;
        }

        console.error('Supabase library not loaded');
        showError('Unable to load products. Please refresh the page.');
        return false;
      } catch (err) {
        console.error('Error initializing Supabase client from config:', err);
        showError('Unable to load products. Please try again later.');
        return false;
      }
    }

    async function loadFeaturedProducts() {
      const container = document.getElementById('featured-products');
      const loadingEl = container.querySelector('.products-loading');
      
      try {
        if (loadingEl) {
          loadingEl.textContent = 'Loading products...';
        }

        // Fetch all products (we'll filter and select specific ones)
        const { data, error } = await supabaseClient
          .from('products')
          .select('*')
          .eq('is_published', true)
          .order('created_at', { ascending: false });

        if (error) {
          throw new Error(error.message || 'Failed to load products');
        }

        if (!data || data.length === 0) {
          container.innerHTML = '<p class="lead" style="text-align: center; padding: 2rem; color: var(--muted);">No products available at the moment. Please check back later.</p>';
          return;
        }

        // Check if static products already exist (bedspread and curtain)
        const existingStaticProducts = container.querySelectorAll('.product-card:not([data-id])');
        const hasStaticBedspread = Array.from(existingStaticProducts).some(card => 
          card.getAttribute('data-category') === 'bedspread'
        );
        const hasStaticCurtain = Array.from(existingStaticProducts).some(card => 
          card.getAttribute('data-category') === 'curtain'
        );
        
        // Get static product IDs (if any have data-id attributes)
        const staticIds = new Set(
          Array.from(existingStaticProducts)
            .map(card => card.dataset.id)
            .filter(id => id)
        );

        // Filter products - skip bedspread/curtain if static ones exist
        let filteredData = data;
        if (hasStaticBedspread) {
          filteredData = filteredData.filter(p => (p.category || '').toLowerCase() !== 'bedspread');
        }
        if (hasStaticCurtain) {
          filteredData = filteredData.filter(p => (p.category || '').toLowerCase() !== 'curtain');
        }
        
        // Filter out any products that match static ones by ID
        filteredData = filteredData.filter(p => !staticIds.has(p.id));
        
        // Select up to 4 additional products to fill the section (2 static + 4 dynamic = 6 total)
        const maxDynamic = 4;
        const featured = filteredData.slice(0, maxDynamic);

        // Remove loading message if it exists
        if (loadingEl) {
          loadingEl.remove();
        }
        container.setAttribute('aria-busy', 'false');

        // Append dynamic products to existing static ones
        featured.forEach((product, index) => {
          const card = document.createElement('article');
          card.className = 'product-card';
          if (product && product.id) card.dataset.id = product.id;
          card.setAttribute('data-category', product.category || 'all');
          card.setAttribute('role', 'listitem');
          card.setAttribute('aria-label', `Product: ${product.name || 'Unnamed Product'}`);
          
          // Count existing products for loading priority
          const currentProductCount = container.querySelectorAll('.product-card').length;

          const badgeHTML = product.badge 
            ? `<span class="badge badge-${product.badge.toLowerCase().replace(/\s+/g, '-')}">${product.badge}</span>` 
            : '';
          
          const imgSrc = product.image_url || 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="%23f3f4f6"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%236b7280" font-family="Arial, sans-serif" font-size="20">No Image</text></svg>';
          const whatsappUrl = product.whatsapp_url || 'https://wa.me/233540460532';
          const productName = product.name || 'Unnamed Product';
          const price = product.price ? Number(product.price).toLocaleString('en-GH') : '0';

          card.innerHTML = `
            <a href="product.html?id=${product.id}" style="text-decoration: none; color: inherit; display: block;">
              ${badgeHTML}
              <span class="price-badge">GHS ${price}</span>
              <picture>
                <img src="${imgSrc}" alt="${productName}" loading="lazy" decoding="async" width="400" height="300" fetchpriority="low">
              </picture>
              <div class="product-card-content">
                <h3>${productName}</h3>
                <a href="product.html?id=${product.id}" class="btn" style="background: linear-gradient(135deg, #25D366, #128C7E);">
                  View Details
                </a>
              </div>
            </a>
          `;

          container.appendChild(card);
        });

      } catch (err) {
        console.error('Error loading featured products:', err);
        // Remove loading message but keep static products
        if (loadingEl) {
          loadingEl.remove();
        }
        // Only show error if there are no static products
        const hasStaticProducts = container.querySelectorAll('.product-card').length > 0;
        if (!hasStaticProducts) {
          showError('Unable to load products at this time. Please try again later.');
        }
      }
    }

    function showError(message) {
      const container = document.getElementById('featured-products');
      const hasStaticProducts = container.querySelectorAll('.product-card').length > 0;
      // Only replace content if there are no static products
      if (!hasStaticProducts) {
        container.innerHTML = `
          <div class="error-message" role="alert" style="text-align: center; padding: 2rem; color: var(--error-color, #ef4444);">
            <p>${message}</p>
            <button onclick="location.reload()" class="btn" style="margin-top: 1rem;">Reload Page</button>
          </div>
        `;
      }
      container.setAttribute('aria-busy', 'false');
    }

    // Load products when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', async () => {
        const ok = await initSupabaseClientFromServerConfig();
        if (ok) loadFeaturedProducts();
      });
    } else {
      (async () => {
        const ok = await initSupabaseClientFromServerConfig();
        if (ok) loadFeaturedProducts();
      })();
    }
  })();
</script>

<!-- Navigation Script -->
<script src="assets/js/navbar.js" defer></script>
<script>
// Track WhatsApp clicks from featured products
(function(){
  document.addEventListener('click', function(e){
    try {
      const a = e.target.closest && e.target.closest('a[href*="wa.me"]');
      if (!a) return;
      const card = a.closest && a.closest('.product-card');
      const productId = card && (card.dataset.id || null);
      const name = (card && (card.querySelector && (card.querySelector('h3')?.textContent))) || a.getAttribute('aria-label') || null;
      fetch((location.protocol === 'file:' ? 'http://localhost:3000' : '') + '/api/tracking', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ productId: productId, name: name })
      }).catch(() => {});
    } catch (err) { console.warn('Tracking error', err); }
  }, { capture: true });
})();
</script>
</body>
</html>"